/*
*
* Copyright (c) 2024  Hans Kruse
* Based on a configuration (c) 2023 Darryl deHaan
* SPDX-License-Identifier: MIT
*
*/

#include <behaviors.dtsi>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/mouse.h>
#include <dt-bindings/zmk/outputs.h>
#include <dt-bindings/zmk/ext_power.h>
#include "numpad_extra_keys.h"
#include "consumer_extra_keys.h"
#include "custom_modifiers.h"

#define COPILOT  LSGK(F23)
#define SOUSCHEF RCAK(F24)


// layers
#define DEFAULT         0
#define NGRAM           0
#define QWERTY          1
#define NUM             2
#define SYM1            3
#define SYM2            4
#define NAV             5
#define VOLUME          6 
#define FUN             7
#define HFUN            8
#define HYPFUN          9
#define HYPHFUN        10
#define MEHFUN         11
#define MEHHFUN        12
#define MOUSE          13
#define NUMPAD         14
#define NPCTRL         15
#define NPSYM          16
#define MISC           17
#define CONFIG         18
#define POWER          19
#define INPUT_ASSIST   20
#define APPLAUNCH      21
#define CONSUMER       22
#define DISPLAY        23
#define MEDIA          24
#define INTERNATIONAL  25
#define LANGUAGE       26

/ {
  chosen {
    zmk,matrix_transform = &default_transform;
    //zmk,matrix_transform = &five_column_transform;
  };
};

/*
 * Key numbering cheat sheet:
 * 
 * 0     1  2  3  4  5    6  7  8  9  10 11
 * TAB   Q  W  E  R  T    Y  U  I  O  P  BKSP
 * 
 * 12    13 14 15 16 17   18 19 20 21 22 23
 * Ctrl  A  S  D  F  G    H  J  K  L  ;  SQT
 *  
 * 24    25 26 27 28 29   30 31 32 33 34 35
 * Shift Z  X  C  V  B    N  M  ,  .  /  ESQ
 *
 *          36  37 38     39     40   41
 *          Win UP SPC    ENTER  DOWN ALT
 */


 / {
    combos {
        compatible = "zmk,combos";

	combo_symbol1 {
            layers = <0 1 3>;
            timeout-ms = <25>;
            key-positions = <39 40>;
            bindings = <&tog 3>;
        };

    };

/ {
        keymap {
                compatible = "zmk,keymap";

                default_layer {
                        label = "NGRAM";
// ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// |        GRAVE |         B  |            Y  |           O   |            U   |               SQT   |                         |             SEMI |            L   |            D    |              W  |            V  |            Z         |
// |        HASH  |         C  |            I  |           E   |            A   |               COMMA |                         |             DOT  |            H   |            T    |              S  |            N  |            Q         |
// |        TILDE |         G  |            X  |           J   |            K   |               MINUS |                         |             FSLH |            R   |            M    |              F  |            P  |            BACKSLASH |       
//                                             |           ESC |            TAB |               SPACE |                         |             RET  |            DEL |            BSPC |
                        bindings = <
   &mt RHYP GRAVE  &lt MISC B   &lt DISPLAY Y    &lt POWER  O    &lt CONFIG U     &lt NPCTRL    SQT                               &lt MEHFUN  SEMI   &lt HYPFUN L     &lt FUN    D      &lt LANGUAGE W    &lt NPSYM  V    &mt LHYP   Z 
   &mt LHYP HASH   &mt LMEH C   &mt LGUI    I    &mt LALT   E    &mt LSHFT  A     &mt LCTRL     COMMA                             &mt RCTRL   DOT    &mt RSHFT  H     &mt RALT   T      &mt RGUI     S    &mt RMEH   N    &mt RHYP   Q
   &mt LCA  TILDE  &mt LAG  G   &mt RGUI    X    &mt RALT   J    &mt RSHFT  K     &mt RCTRL     MINUS                             &mt LCTRL   FSLH   &mt LSHFT  R     &mt LALT   M      &mt LGUI     F    &mt RAG    P    &lt MOUSE  BACKSLASH 
                                                 &lt VOLUME ESC  &lt NAV    TAB   &lt APPLAUNCH SPACE                             &lt NUM     RET    &lt SYM1   DEL   &lt SYM2   BSPC 
                        >;
                };

                qwerty_layer {
                        label = "QWERTY";
// ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// |        GRAVE |         Q  |            W  |           E   |            R   |               T     |                         |             Y   |            U   |            I    |              O  |            P  |           \        |
// |        HASH  |         A  |            S  |           D   |            F   |               G     |                         |             H   |            J   |            K    |              L  |            ;  |           "        |
// |        TILDE |         Z  |            X  |           C   |            V   |               B     |                         |             N   |            M   |            ,    |              .  |            /  |           '        |       
//                                             |           ESC |            TAB |               SPACE |                         |             RET |            DEL |            BSPC |
                        bindings = <
   &mt RHYP GRAVE  &lt MISC Q   &lt DISPLAY W    &lt POWER  E    &lt CONFIG R     &lt NPCTRL    T                                 &lt MEHFUN  Y     &lt HYPFUN U     &lt FUN    I      &lt LANGUAGE O    &lt NPSYM  P    &mt LHYP  BACKSLASH
   &mt LHYP HASH   &mt LMEH A   &mt LGUI    S    &mt LALT   D    &mt LSHFT  F     &mt LCTRL     G                                 &mt RCTRL   H     &mt RSHFT  J     &mt RALT   K      &mt RGUI     L    &mt RMEH   SEMI &mt RHYP  DQT
   &mt LCA  TILDE  &mt LAG  Z   &mt RGUI    X    &mt RALT   C    &mt RSHFT  V     &mt RCTRL     B                                 &mt LCTRL   N     &mt LSHFT  M     &mt LALT   COMMA  &mt LGUI     DOT  &mt RAG    FSLH &lt MOUSE SQT 
                                                 &lt VOLUME ESC  &lt NAV    TAB   &lt APPLAUNCH SPACE                             &lt NUM     RET   &lt SYM1   DEL   &lt SYM2   BSPC 
                        >;
                };


                number_layer {
                        label = "NUM";
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// | !  |  7  |  8  |  9  | * | / |                                                                 |          D      |           E |          F |           |      LMEH |    LHYP  |
// | -  |  4  |  5  |  6  | + | ^ |                                                                 |          A      |           B |          C |           |      RMEH |    RHYP  |
// | .  |  1  |  2  |  3  | , | % |                                                                 |                 |             |            |           |      RAG  |    RCA   |
//                  |  0  | = | ~ |                                                                 |                 |             |            |
                            bindings = <
   &kp PERCENT     &kp NUMBER_7 &kp NUMBER_8 &kp NUMBER_9   &kp COLON    &kp K                       &kp       D        &kp       E   &kp      F    &tog NUM    &kp LMEH  &kp LHYP
   &kp KP_PLUS     &kp NUMBER_4 &kp NUMBER_5 &kp NUMBER_6   &kp KP_MINUS &kp J                       &mt RCTRL A        &mt RSHFT B   &mt RALT C    &kp RGUI    &kp RMEH  &kp RHYP
   &kp KP_ASTERISK &kp NUMBER_1 &kp NUMBER_2 &kp NUMBER_3   &kp KP_SLASH &kp LS(G)                   &mt LCTRL COPILOT  &kp LSHFT     &kp LALT      &kp LGUI    &kp RAG   &kp RCA
                                             &kp NUMBER_0   &kp COMMA    &kp DOT                     &none              &kp COPILOT   &kp EQL      
                        >;
                };

                symbols_layer1 {
                        label = "SYM1";
// -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// |    ! |       { |       '   |     "    |       }    |      ?       |                            |             |            |           |             |     LMEH |     LHYP  |
// |    # |       ^ |       =   |     _    |       $    |      *       |                            |      RCTRL  |      RSHFT |      RALT |       RGUI  |     RMEH |     RHYP  |
// |    @ |       < |      "|"  |     -    |       >    |      /       |                            |      LCTRL  |      LSHFT |      LALT |       LGUI  |     RAG  |     RCA   |
//                              | soft_off |       .    |      *       |                            |             |            | CAPS WORD |
                       bindings = <
   &kp EXCL  &kp LBRC  &kp SQT   &kp DQT     &kp RBRC    &kp QMARK                                   &none        &none         &none       &none         &kp LMEH   &kp LHYP
   &kp HASH  &kp CARET &kp EQUAL &kp UNDER   &kp DOLLAR  &kp ASTERISK                                &kp   RCTRL  &kp   RSHFT   &kp   RALT  &kp   RGUI    &kp RMEH   &kp RHYP
   &kp AT    &kp LT    &kp PIPE  &kp MINUS   &kp GT      &kp SLASH                                   &kp   LCTRL  &kp   LSHFT   &kp   LALT  &kp   LGUI    &kp RAG    &kp RCA
                                 &soft_off   &kp DOT     &kp ASTERISK                                &tog  SYM1   &none         &caps_word      
                        >;
                };
                symbols_layer2 {
                        label = "SYM2";
// ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// |    ! |       ` |       (   |     )   |       ;    |      ,       |                            |              |             |            |             |    LMEH |    LHYP  |
// |    # |       ^ |       =   |     _   |       $    |      *       |                            |       RCTRL  |       RSHFT |       RALT |       RGUI  |    RMEH |    RHYP  |
// |    ~ |       & |       [   |     ]   |       +    |      \       |                            |       LCTRL  |       LSHFT |       LALT |       LGUI  |    RAG  |    RCA   |
//                              |     %   |       :    |      ;       |                            |              |             |            |
                       bindings = <
   &kp EXCL  &kp GRAVE &kp LPAR  &kp RPAR    &kp SEMI    &kp COMMA                                   &none          &none         &none        &none        &kp LMEH  &kp LHYP
   &kp HASH  &kp CARET &kp EQUAL &kp UNDER   &kp DOLLAR  &kp ASTERISK                                &kp   RCTRL    &kp   RSHFT   &kp   RALT   &kp   RGUI   &kp RMEH  &kp RHYP
   &kp TILDE &kp AMPS  &kp LBKT  &kp RBKT    &kp PLUS    &kp BACKSLASH                               &kp   LCTRL    &kp   LSHFT   &kp   LALT   &kp   LGUI   &kp RAG   &kp RCA
                                 &kp PERCENT &kp COLON   &kp SEMI                                    &tog  SYM2     &none         &none      
                        >;
                };

                nav_layer {
                        label = "NAV";
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// |      |     |         |      |      |        |                                                  |     PASTE   |     COPY      |     CUT     |    UNDO    |      REDO   |            INS      |
// | LHYP  |     |   LGUI  | LALT | LSHFT | LCTRL |                                                 |     LEFT    |     DOWN      |     UP      |    RIGHT   |             |                     |
// | LMEH  |     |   RCTRL | RALT | RGUI | RSHFT |                                                  |     HOME    |     PAGE_DOWN |     PAGE_UP |    END     |             |            K_APP    |       
//                        |      |       | K_APP |                                                  |     RET     |     BSPC      |     DEL     |
                        bindings = <
   &none   &none &none     &none    &none      &none                                                   &kp K_PASTE   &kp K_COPY      &kp   K_CUT   &kp K_UNDO   &kp   K_REDO  &kp        INS
   &kp LHYP &none &kp LGUI  &kp LALT &kp LSHFT &kp LCTRL                                               &kp LEFT      &kp DOWN        &kp      UP   &kp RIGHT    &none         &none
   &kp LMEH &none &kp RCTRL &kp RALT &kp RGUI  &kp RSHFT                                               &kp HOME      &kp PAGE_DOWN   &kp PAGE_UP   &kp END      &none         &kp        K_APP
                           &kp DEL  &none      &kp BSPC                                                &kp RET       &kp DEL         &kp  BSPC      
                        >;
                };

                volume_layer {
                        label = "VOLUME";
// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// |      |     |         |        |         |       |                                                 |              |       K_VOLUME_DOWN  |     K_VOlUME_UP  |                     |                 |                |
// | LHYP  |     |   LGUI  |  LALT |   LSHFT | LCTRL |                                                 | C_BASS_BOOST |       C_VOLUME_DOWN  |     C_VOLUME_UP  |     C_ALT_AUDIO_INC |                 |                |
// | LMEH  |     |   RCTRL |  RALT |   RGUI  | RSHFT |                                                 |              |       K_VOLUME_DOWN2 |     K_VOlUME_UP2 |                     |                 |                |      
//                        |        |         |       |                                                 | K_MUTE       |       C_MUTE         |     K_MUTE2      |
                        bindings = <
   &none     &none &none     &none    &none     &none                                                    &none            &kp K_VOLUME_DOWN    &kp K_VOLUME_UP    &none                 &none                &none 
   &kp LHYP  &none &kp LGUI  &kp LALT &kp LSHFT &kp LCTRL                                                &kp C_BASS_BOOST &kp C_VOLUME_DOWN    &kp C_VOLUME_UP    &kp C_ALT_AUDIO_INC   &none                &none
   &kp LMEH  &none &kp RCTRL &kp RALT &kp RGUI  &kp RSHFT                                                &none            &kp K_VOLUME_DOWN2   &kp K_VOLUME_UP2   &none                 &none                &none
                             &none    &none     &none                                                    &kp K_MUTE       &kp C_MUTE           &kp K_MUTE2
                        >;
                };

                fun_layer {
                        label = "FUN";
// ------------------------------------------------------------------------------------------------------------------------------------------------------------------
// |       |   F7 |   F8 |     F9 |           |       |                                             |           |        |        | HFUN    |            |           |
// |       |   F4 |   F5 |     F6 |           |       |                                             | RSHFT     | RGUI   | RALT   | RCTRL   |            |     RHYP  |
// |       |   F1 |   F2 |     F3 |           |       |                                             | LCTRL     | LSHFT   | LALT   | LGUI    |            |     RMEH  |
//                       |    F10 |           |       |                                             |           |        |        |
                         bindings = <
   &none     &kp F7 &kp F8 &kp   F9  &none     &none                                                  &none       &none    &none    &mo HFUN  &none        &none
   &none     &kp F4 &kp F5 &kp   F6  &none     &none                                                  &kp RSHFT   &kp RGUI &kp RALT &kp RCTRL &none        &kp RHYP
   &none     &kp F1 &kp F2 &kp   F3  &none     &none                                                  &kp LCTRL   &kp LSHFT &kp LALT &kp LGUI  &none        &kp RMEH
                           &kp   F10 &kp DEL   &kp   BSPC                                             &none       &none    &none     
                        >;
                };

                hfun_layer {
                        label = "HFUN";
// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// |       |   F17 |   F18 |     F19 |   F23  |    F24 |                                            |           |          |            |             |       |             |
// |       |   F14 |   F15 |     F16 |   F21  |    F22 |                                            | RSHFT     |     RGUI |       RALT |       RCTRL |       |       RHYP  |
// |       |   F11 |   F12 |     F13 |        |        |                                            | LCTRL     |     LSHFT |       LALT |       LGUI  |       |       RMEH  |
//                         |     F20 |        |        |                                            |           |          |            |
                         bindings = <
   &none   &kp F17 &kp F18 &kp   F19 &kp F23   &kp F24                                               &none        &none      &none        &none         &none   &none
   &none   &kp F14 &kp F15 &kp   F16 &kp F21   &kp F22                                               &kp   RSHFT  &kp RGUI   &kp   RALT   &kp   RCTRL   &none   &kp   RHYP
   &none   &kp F11 &kp F12 &kp   F13 &none     &none                                                 &kp   LCTRL  &kp LSHFT   &kp   LALT   &kp   LGUI    &none   &kp   RMEH
                           &kp   F20 &kp DEL   &kp BSPC                                              &none        &none      &none     
                        >;
                };

                hypfun_layer {
                        label = "HPR FUN";
// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// |    |          F7 |          F8 |           F9  |        |             |                   |            |             |      HYPHFUN |             |       |             |
// |    |          F4 |          F5 |           F6  |        |             |                   | RSHFT      |        RGUI |      RALT    | RCTRL       |       |       RHYP  |
// |    |          F1 |          F2 |           F3  |        |             |                   | LCTRL      |        LSHFT |      LALT    | LGUI        |       |       RMEH  |
//                                  |               |        |             |                   |            |             |              |
                         bindings = <
  &none  &kp LHYPK(F7) &kp LHYPK(F8)  &kp LHYPK(F9)  &none      &none                         &none        &none        &mo   HYPHFUN   &none         &none   &none
  &none  &kp LHYPK(F4) &kp LHYPK(F5)  &kp LHYPK(F6)  &none      &none                         &kp   RSHFT  &kp    RGUI  &kp   RALT      &kp   RCTRL   &none   &kp   RHYP
  &none  &kp LHYPK(F1) &kp LHYPK(F2)  &kp LHYPK(F3)  &none      &none                         &kp   LCTRL  &kp    LSHFT  &kp   LALT      &kp   LGUI    &none   &kp   RMEH
                                        &kp LHYPK(F10) &kp   DEL  &kp   BSPC                    &none        &none        &none     
                        >;
                };

                hyphfun_layer {
                        label = "HHPR FUN";
// ------------------------------------------------------------------------------------------------------------------------------------------------------------------
// |    |          F17 |          F18 |           F19 |          F23 |          F24 |            |              |         |           |            |     |          |
// |    |          F14 |          F15 |           F16 |          F21 |          F22 |            |      RSHFT   |    RGUI |      RALT | RCTRL      |     |     RHYP |
// |    |          F11 |          F12 |           F13 |              |              |            |      LCTRL   |    LSHFT |      LALT | LGUI       |     |     RMEH |
//                                    |           F20 |              |              |            |              |         |           |
                         bindings = <
  &none  &kp LHYPK(F17) &kp LHYPK(F18)  &kp LHYPK(F19) &kp LHYPK(F23) &kp LHYPK(F24)         &none        &none       &none        &none        &none &none
  &none  &kp LHYPK(F14) &kp LHYPK(F15)  &kp LHYPK(F16) &kp LHYPK(F21) &kp LHYPK(F22)         &kp   RSHFT  &kp   RGUI  &kp   RALT   &kp   RCTRL  &none &kp RHYP
  &none  &kp LHYPK(F11) &kp LHYPK(F12)  &kp LHYPK(F13) &none &none                             &kp   LCTRL  &kp   LSHFT  &kp   LALT   &kp   LGUI   &none &kp RMEH
                                          &kp LHYPK(F20) &kp DEL &kp BSPC                        &none        &none       &none     
                        >;
                };

                mehfun_layer {
                        label = "LMEH FUN";
// -------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// |    |         F7 |          F8 |          F9  |        |         |                         |             |       MEHHFUN |          |             |     |               |
// |    |         F4 |          F5 |          F6  |        |         |                         |       RSHFT |       RGUI    |  RALT    |       RCTRL |     |         RHYP  |
// |    |         F1 |          F2 |          F3  |        |         |                         |       LCTRL |       LSHFT    |  LALT    |       LGUI  |     |         RMEH  |
//                                 |          F10 |        |         |                         |             |               |
                         bindings = <
  &none  &kp LMEHK(F7)  &kp LMEHK(F8)  &kp LMEHK(F9)   &none    &none                            &none         &mo   MEHHFUN &none        &none         &none  &none
  &none  &kp LMEHK(F4)  &kp LMEHK(F5)  &kp LMEHK(F6)   &none    &none                            &kp   RSHFT   &kp   RGUI    &kp   RALT   &kp   RCTRL   &none  &kp    RHYP
  &none  &kp LMEHK(F1)  &kp LMEHK(F2)  &kp LMEHK(F3)   &none    &none                            &kp   LCTRL   &kp   LSHFT    &kp   LALT   &kp   LGUI    &none  &kp    RMEH
                                       &kp LMEHK(F10)  &kp DEL  &kp BSPC                         &none         &none         &none     
                        >;
                };

                mehhfun_layer {
                        label = "HLMEH FUN";
// -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// |    |         F17 |          F18 |          F19 |           F23 |        F24  |               |           |            |            |                |       |             |
// |    |         F14 |          F15 |          F16 |           F21 |        F22  |               | RSHIFT    |       RGUI |      RALT  |        RCTRL   |       |        RHYP |
// |    |         F11 |          F12 |          F13 |               |             |               | LSHIFT    |       LSHFT |      LALT  |        LGUI    |       |        RMEH |
//                                   |          F20 |               |             |               |           |            |            |
                         bindings = <
  &none  &kp LMEHK(F17)  &kp LMEHK(F18)  &kp LMEHK(F19)  &kp LMEHK(F23) &kp LMEHK(F24)             &none        &none        &none         &none           &none   &none
  &none  &kp LMEHK(F14)  &kp LMEHK(F15)  &kp LMEHK(F16)  &kp LMEHK(F21) &kp LMEHK(F22)             &kp   RSHFT  &kp   RGUI   &kp   RALT    &kp   RCTRL     &none   &kp    RHYP
  &none  &kp LMEHK(F11)  &kp LMEHK(F12)  &kp LMEHK(F13)  &none         &none                       &kp   LCTRL  &kp   LSHFT   &kp   LALT    &kp   LGUI      &none   &kp    RMEH
                                         &kp LMEHK(F20)  &kp DEL       &kp BSPC                    &none        &none        &none     
                        >;
                };

                mouse_layer {
                        label = "MOUSE";
// -----------------------------------------------------------------------------------------------------------------------------------------------------------------
// |      |     |          |       |         |            |                                             |          |           |          |           |       |      |
// | LHYP  |     |   LGUI  |  LALT |   LSHFT | LCTRL      |                                             |      MB1 |       MB3 |     MB4  |       MB5 |       |      |
// | LMEH  |     |   RCTRL |  RALT |   RGUI  | RSIFT      |                                             |      MB2 |           |          |           |       |      |      
//                         |       |         |            |                                             |          |           |          |
                        bindings = <
   &none   &none  &none     &none    &none     &none                                                      &none       &none      &none       &none       &none   &none   
   &kp LHYP &none &kp LGUI  &kp LALT &kp LSHFT &kp   LCTRL                                                &mkp  MB1   &mkp  MB3  &mkp  MB4   &mkp  MB5   &none   &none
   &kp LMEH &none &kp RCTRL &kp RALT &kp RGUI  &kp   RSHFT                                                &mkp  MB2   &none      &none       &none       &none   &none
                            &none    &none     &none                                                      &none       &none      &none      
                        >;
                };
                
                numpad_layer {
                        label = "NUMPAD";
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// | !  |  7  |  8  |  9  | * | / |                                                                                                   |                   |              |                 |           |     |      |
// | -  |  4  |  5  |  6  | + | ^ |                                                                                                   | RSHFT             | RGUI         | RALT            | RCTRL     |     | RHYP  |
// | .  |  1  |  2  |  3  | , | % |                                                                                                   | LCTRL             | LSHFT         | LALT            | LGUI      |     | RMEH  |
//                  |  0  | = | ~ |                                                                                                   |                   |              |                 |
                            bindings = <
   &kp KP_EXCLAMATION &lt MISC KP_N7 &kp       KP_N8 &kp        KP_N9   &kp      KP_ASTERISK &kp       KP_SLASH                          &kp       KP_00    &kp KP_000    &none         &none       &none &none
   &mt LHYP KP_MINUS   &kp      KP_N4 &mt LGUI  KP_N5 &mt LALT   KP_N6   &mt LSHFT KP_PLUS     &mt LCTRL KP_CARET                          &mt RCTRL KP_D     &mt RSHFT KP_E &mt RALT KP_F &kp RGUI   &none &kp RHYP
   &mt LMEH KP_DOT     &kp      KP_N1 &mt RCTRL KP_N2 &mt RALT   KP_N3   &mt RSHFT KP_COMMA    &mt RGUI KP_PERCENT                        &mt LCTRL KP_A     &mt LSHFT KP_B &mt LALT KP_C &kp LGUI    &none &kp RMEH
                                                     &lt NPCTRL KP_N0   &kp      KP_TAB      &kp       KP_SPACE                          &lt NPSYM KP_ENTER &kp KP_NUMLOCK &kp KP_BACKSPACE     
                        >;
                };

                numpad_control_layer {
                        label = "NPCTRL";
// -----------------------------------------------------------------------------------------------------------------------------
// |     |      |      |     |      |         |                                     |      |      |      |      |      |       |
// |     |      |      |     |      |         |                                     |      |      |      |      |      |       | 
// |     |      |      |     |      |         |                                     |      |      |      |      |      |       |
//                     |     |      |         |                                     |      |      |      |
                         bindings = <
   &none  &none  &none  &none  &none        &none                                     &kp KP_BINARY        &kp KP_OCTAL           &kp KP_DECIMAL    &kp KP_HEXADECIMAL      &kp THOUSANDS_SEPARATOR  &kp DECIMAL_SEPARATOR 
   &none  &none  &none  &none  &none        &none                                     &kp KP_MEMORY_DIVIDE &kp KP_MEMORY_SUBTRACT &kp KP_MEMORY_ADD &kp KP_MEMORY_MULTIPLY  &kp CURRENCY_UNIT        &kp CURRENCY_SUB_UNIT
   &none  &none  &none  &none  &none        &none                                     &kp KP_CLEAR         &kp KP_CLEAR_ENTRY     &none             &kp KP_PLUS_MINUS       &none                       &none
                        &none  &kp   KP_TAB &kp KP_SPACE                              &kp KP_MEMORY_STORE  &kp KP_MEMORY_RECALL   &kp KP_MEMORY_CLEAR     
                        >;
                };

                numpad_symbol_layer {
                        label = "NPSYM";
// --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// |     |      |      |     |      |         |                                                                                                  |        |         |      |           |     |      | 
// |     |      |      |     |      |         |                                                                                                  | RSHIFT | RGUI    | RALT | RCTRL     |     | RHYP  | 
// |     |      |      |     |      |         |                                                                                                  | LCTRL  | LSHFT    | LALT | LGUI      |     | RMEH  | 
//                     |     |      |         |                                                                                                  |        |         |      |
                         bindings = <
   &kp KP_EXCLAMATION  &kp KP_LPAR       &kp KP_RPAR         &kp KP_PIPE       &kp KP_PIPE_PIPE           &kp KP_PIPE                              &none     &none    &none    &none     &none &none
   &none               &kp KP_LEFT_BRACE &kp KP_RIGHT_BRACE  &kp KP_XOR        &kp KP_EQUAL               &kp KP_COLON                             &kp RSHFT &kp RGUI &kp RALT &kp RCTRL &none &kp RHYP
   &kp KP_HASH         &none             &none               &kp KP_AMPERSAND  &kp KP_AMPERSAND_AMPERSAND &kp KP_EQUAL_AS400                       &kp LCTRL &kp LSHFT &kp LALT &kp LGUI  &none &kp RMEH
                                                                               &kp KP_LESS_THAN           &kp KP_GREATER_THAN  &kp KP_AT           &none     &none    &none      
                        >;
                };


                misc_layer {
                        label = "MISC";
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// | TILDE2        |      |         |             |                | to NUMPAD   |                              | to QWERTY     | to NGRAM     | CLEAR       | CLEAR_AGAIN      | NUMLOCK    | NUBS    |
// | mt LHYP NUHS   |      |   LGUI  |     LALT    |   LSHFT         | LCTRL       |                             | CAPS WORD     | OUT         | OPER        | EXSEL            | CAPSLOCK   | PIPE2   |
// | LMEH           |      |   RCTRL |     RALT    |   RGUI         | RSHFT       |                             | PAUSE_BREAK   | CRSEL       | PRIOR       | SEPARATOR        | SCROLLLOCK |         |
//                                  |    SYSREQ   |                | PRINTSCREEN |                              |               | K_CANCEL    | ALT_ERASE   |
                         bindings = <
   &kp TILDE2     &none     &none     &none         &none             &to NUMPAD                                  &to QWERTY      &to NGRAM      &kp CLEAR      &kp CLEAR_AGAIN &kp LNLCK      &kp NUBS
   &mt LHYP NUHS   &none     &kp LGUI  &kp LALT      &kp LSHFT          &kp LCTRL                                  &none           &kp OUT       &kp OPER       &kp EXSEL       &kp CAPSLOCK   &kp PIPE2
   &kp LMEH        &none     &kp RCTRL &kp RALT      &kp RGUI          &kp RSHFT                                  &kp PAUSE_BREAK &kp CRSEL     &kp PRIOR      &kp SEPARATOR   &kp SCROLLLOCK &none
                                      &kp SYSREQ    &kp K_EDIT        &kp PRINTSCREEN                             &kp RET2        &kp K_CANCEL  &kp ALT_ERASE 
                        >;
                };
                config_layer {
                        label = "CONFIG";
// ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// |      | left reset      |        |               |               |               |                               |  BT_CLR         | BT_PRV         | BT_NXT     | BT_CLR_AL        |               | right reset      |
// |      | left bootloader |        |               |               |               |                               |  BT_SEL 1       | BT_SEL 2       | BT_SEL 3   | BT_SEL 4         |               | right bootloader | 
// |      |                 |        |               |               |               |                               |  BT_DISC 0      | BT_DISC 1      | BT_DISC 2  | BIT_DISC 3       |               |                  |
//                                   |       OUT_USB |       OUT_BLE |       OUT_TOG |                               |  EP_TOG         | EP_ON          | EP_OFF     |
                         bindings = <
   &none       &sys_reset    &none     &none           &none           &none                                            &bt BT_CLR        &bt BT_PRV       &bt BT_NXT    &bt BT_CLR_ALL   &none           &sys_reset 
   &none       &bootloader   &none     &none           &none           &none                                            &bt BT_SEL 0      &bt BT_SEL 1     &bt BT_SEL 2  &bt BT_SEL 3     &bt BT_SEL 4    &bootloader
   &none       &none         &none     &none           &none           &none                                            &bt BT_DISC 0     &bt BT_DISC 1    &bt BT_DISC 2 &bt BT_DISC 3    &bt BT_DISC 4   &none
                                       &out  OUT_USB   &out  OUT_BLE   &out  OUT_TOG                                    &ext_power EP_TOG &ext_power EP_ON &ext_power EP_OFF      
                        >;
                };

                power_layer {
                        label = "POWER";
// ------------------------------------------------------------------------------------------------------------------------------------------------------------
// |     |      |      |     |      |         |                                     |     C_RESET      |     K_POWER   |    C_POWER     |      |      |       |
// |     |      |      |     |      |         |                                     |     C_SLEEP_MODE |     K_SLEEP   |    C_SLEEP     |      |      |       | 
// |     |      |      |     |      |         |                                     |                  |               |                |      |      |       |
//                     |     |      |         |                                     |     K_LOCK       |     C_AL_LOCK |    C_AL_LOGOFF |
                         bindings = <
   &none  &none  &none  &none  &none  &none                                           &kp C_RESET        &kp K_POWER    &kp K_POWER       &none  &none  &none 
   &none  &none  &none  &none  &none  &none                                           &kp C_SLEEP_MODE   &kp K_SLEEP    &kp C_SLEEP       &none  &none  &none
   &none  &none  &none  &none  &none  &none                                           &none              &none          &none             &none  &none  &none
                        &none  &none  &none                                           &kp K_LOCK         &kp C_AL_LOCK  &kp C_AL_LOGOFF  
                        >;
                };

                input_assist_layer {
                        label = "I. Assist";
// -----------------------------------------------------------------------------------------------------------------------------
// |     |      |      |     |      |         |                                     |      |      |      |      |      |       |
// |     |      |      |     |      |         |                                     |      |      |      |      |      |       | 
// |     |      |      |     |      |         |                                     |      |      |      |      |      |       |
//                     |     |      |         |                                     |      |      |      |
                         bindings = <
   &none  &none  &none  &none  &none  &none                                           &none  &none  &none  &none  &none  &none 
   &none  &none  &none  &none  &none  &none                                           &none  &none  &none  &none  &none  &none
   &none  &none  &none  &none  &none  &none                                           &none  &none  &none  &none  &none  &none
                        &none  &none  &none                                           &none  &none  &none 
                        >;
                };

                application_launch_layer {
                        label = "APPL";
// ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// |       C_AL_MY_COMPUTER |     C_AL_DOCUMENTS   |     C_AL_FILE_BROWSER |     C_AL_WWW                |      K_WWW             |      C_AL_CALCULATOR      |                        |           C_AL_IMAGE_BROWSER |              C_AL_NEWS         |          C_AL_TASK_MANAGER        |   C_AL_KEYBOARD_LAYOUT  |      C_AL_COMMAND_LINE                          |          C_AL_HELP         |
// |       C_AL_EMAIL       |     C_AL_CALENDAR    |     C_AL_CONTACTS     |     C_AL_INSTANT_MESSAGING  |      C_AL_NETWORK_CHAT |      C_AL_TEXT_EDITOR     |                        |           C_AL_AUDIO_BROWSER |              C_AL_VOICEMAIL    |          C_AL_AV_CAPTURE_PLAYBACK |   C_AL_THESAURUS        |      C_AL_TELEPHONY_DIALER                      |          K_HELP            |
// |       C_AL_WORD        |     C_AL_SPREADSHEET |     C_AL_PRESENTATION |     C_AL_DATABASE           |      C_AL_JOURNAL      |      C_AL_GRAPHICS_EDITOR |                        |           C_AL_MOVIE_BROWSER |              C_AL_FINANCE      |          C_AL_SPELLCHECK          |   C_AL_GRAMMAR_CHECK    |      C_AL_CONTEXT_AWARE_DESKTOP_ASSISTANT       |          C_AL_OEM_FEATURES |
//                                                 |     C_AL_PRESENTATION |     C_AL_PREV_TASK          |      C_AL_NEXT_TASK    |                           |                        |                              |                                |          C_AL_SELECT_TASK                         | 
                         bindings = <
   &kp     C_AL_MY_COMPUTER   &kp C_AL_DOCUMENTS     &kp C_AL_FILE_BROWSER   &kp C_AL_WWW                   &kp K_WWW               &kp  C_AL_CALCULATOR                                 &kp       C_AL_IMAGE_BROWSER   &kp          C_AL_NEWS           &kp      C_AL_TASK_MANAGER         &kp       C_AL_KEYBOARD_LAYOUT   &kp   C_AL_CONTROL_PANEL                      &kp     C_AL_HELP
   &mt LHYP C_AL_EMAIL        &kp C_AL_CALENDAR      &kp C_AL_CONTACTS       &kp C_AL_INSTANT_MESSAGING     &kp C_AL_NETWORK_CHAT   &kp  C_AL_TEXT_EDITOR                                &mt RCTRL C_AL_AUDIO_BROWSER   &mt RSHFT     C_AL_VOICEMAIL      &mt RALT C_AL_AV_CAPTURE_PLAYBACK  &mt RGUI C_AL_THESAURUS         &kp   C_AL_TELEPHONY_DIALER                   &mt RHYP K_HELP
   &mt LMEH C_AL_WORD         &kp C_AL_SPREADSHEET   &kp C_AL_PRESENTATION   &kp C_AL_DATABASE              &kp C_AL_JOURNAL        &kp  C_AL_GRAPHICS_EDITOR                            &mt LCTRL C_AL_MOVIE_BROWSER   &mt LSHFT     C_AL_FINANCE        &mt LALT C_AL_SPELLCHECK           &mt LGUI  C_AL_GRAMMAR_CHECK     &kp   C_AL_CONTEXT_AWARE_DESKTOP_ASSISTANT    &mt RMEH C_AL_OEM_FEATURES
                                                                             &kp C_AL_PREV_TASK             &kp C_AL_NEXT_TASK      &none                                                &kp       C_AL_SCREEN_SAVER    &kp          C_AL_COMMAND_LINE   &kp      C_AL_SELECT_TASK 
                        >;
                };

                consumer_layer {
                        label = "CONSUMER";
// ----------------------------     ---------------------------------------------------------------------------------------------------
// |       |      |      |     |      |         |                                          |      |      |      |      |      |       |
// |       |      |      |     |      |         |                                          |      |      |      |      |      |       | 
// |       |      |      |     |      |         |                                          |      |      |      |      |      |       |
//                       |     |      |         |                                          |      |      |      |
                         bindings = <
   &kp   AT  &none       &none  &none  &none  &none                                          &none  &none  &none  &none  &none  &none 
   &none     &none       &none  &none  &none  &none                                          &none  &none  &none  &none  &none  &none
   &none     &none       &none  &none  &none  &none                                          &none  &none  &none  &none  &none  &none
                                &none  &none  &none                                          &none  &none  &none 
                        >;
                };

                display_layer {
                        label = "DISPLAY";
// ------------------------------------------------------------------------------------------------------------------------------------------------------------------------
// |     |      |      |     |      |         |                                     |               |              |               |             |                |       |
// |     |      |      |     |      |         |                                     |     C_BRI_MIN |    C_BRI_DEC |     C_BRI_INC |    C_BR_MAX |     C_BRI_AUTO |       | 
// |     |      |      |     |      |         |                                     |               |              |               |             |                |       |
//                     |     |      |         |                                     |    C_BKLT_TOG |    C_ASPECT  |     C_PIP     |
                         bindings = <
   &none  &none  &none  &none  &none  &none                                           &none          &none           &none          &none          &none           &none 
   &none  &none  &none  &none  &none  &none                                           &kp C_BRI_MIN  &kp C_BRI_DEC   &kp C_BRI_INC  &kp C_BRI_MAX  &kp C_BRI_AUTO  &none
   &none  &none  &none  &none  &none  &none                                           &none          &none           &none          &none          &none           &none
                        &none  &none  &none                                           &kp C_BKLT_TOG &kp C_ASPECT  &kp   C_PIP 
                        >;
                };

                media_layer {
                        label = "MEDIA";
// -----------------------------------------------------------------------------------------------------------------------------
// |     |      |      |     |      |         |                                     |      |      |      |      |      |       |
// |     |      |      |     |      |         |                                     |      |      |      |      |      |       | 
// |     |      |      |     |      |         |                                     |      |      |      |      |      |       |
//                     |     |      |         |                                     |      |      |      |
                         bindings = <
   &none  &none  &none  &none  &none  &none                                           &none  &none  &none  &none  &none  &none 
   &none  &none  &none  &none  &none  &none                                           &none  &none  &none  &none  &none  &none
   &none  &none  &none  &none  &none  &none                                           &none  &none  &none  &none  &none  &none
                        &none  &none  &none                                           &none  &none  &none 
                        >;
                };

                international_layer {
                        label = "INT";
// -------------------------------------------------------------------------------------------------------------------------------------
// |     |    INT7 |    INT8 |    INT9  |      |      |                                     |      |      |      |      |      |       |
// |     |    INT4 |    INT5 |    INT6  |      |      |                                     |      |      |      |      |      |       | 
// |     |    INT1 |    INT2 |    INT3  |      |      |                                     |      |      |      |      |      |       |
//                                |     |      |      |                                     |      |      |      |
                         bindings = <
   &none  &kp INT7  &kp INT8  &kp INT9   &none      &none                                     &none  &none  &none  &none  &none  &none 
   &none  &kp INT4  &kp INT5  &kp INT6   &none      &none                                     &none  &none  &none  &none  &none  &none
   &none  &kp INT1  &kp INT2  &kp INT3   &none      &none                                     &none  &none  &none  &none  &none  &none
                              &none      &kp   TAB  &kp   SPACE                               &none  &none  &none 
                        >;
                };

                language_layer {
                        label = "LANG";
// ----------------------------------------------------------------------------------------------------------------------------------------------------------
// |     |    LANG7 |    LANG8 |    LANG9  |          |              |                            |      |      |                  |        |       |       |
// |     |    LANG4 |    LANG5 |    LANG6  |          |              |                            |      |      |                  |        |       |       | 
// |     |    LANG1 |    LANG2 |    LANG3  |          |              |                            |      |      |                  |        |       |       |
//                                   |     |          |              |                            |      |      |                  |
                         bindings = <
   &none  &kp LANG7  &kp LANG8  &kp LANG9   &none       &none                                      &none  &none  &mo  INTERNATIONAL   &none   &none   &none 
   &none  &kp LANG4  &kp LANG5  &kp LANG6   &none       &none                                      &none  &none  &none                &none   &none   &none
   &none  &kp LANG1  &kp LANG2  &kp LANG3   &none       &none                                      &none  &none  &none                &none   &none   &none
                                &none       &kp    TAB  &kp   SPACE                                &none  &none  &none 
                        >;
                };
        };
};
